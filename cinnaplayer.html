<div id="mediaPlayer" class="window" style="width:720px;">
  <div class="title-bar">ðŸŽ¬ CinnaOS Media Player</div>
  <div class="content">
    <!-- File Player -->
    <video id="player" width="720" height="405" controls>
      Your browser does not support video playback.
    </video>
    <br>

    <!-- File Input -->
    <input type="file" id="fileInput" accept="audio/*,video/*">
    <button id="saveBtn">Save File</button>
    <br><br>

    <!-- URL Input -->
    <input type="text" id="urlInput" placeholder="Enter YouTube URL" style="width:60%;">
    <button id="loadURL">Load Video</button>
    <br><br>

    <!-- YouTube Embed -->
    <div id="youtubeContainer" style="width:720px; height:405px; display:none;">
      <iframe id="youtubeFrame" width="720" height="405" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>
</div>

<script>
const fileInput = document.getElementById("fileInput");
const player = document.getElementById("player");
const saveBtn = document.getElementById("saveBtn");
const urlInput = document.getElementById("urlInput");
const loadURL = document.getElementById("loadURL");
const youtubeContainer = document.getElementById("youtubeContainer");
const youtubeFrame = document.getElementById("youtubeFrame");

let currentFile;

// File input load
fileInput.addEventListener("change", (event) => {
  const file = event.target.files[0];
  if (file) {
    const url = URL.createObjectURL(file);
    currentFile = file;
    player.src = url;
    player.style.display = "block";
    youtubeContainer.style.display = "none";
    player.play();
  }
});

// Save current file
saveBtn.addEventListener("click", () => {
  if (!currentFile) return alert("No file loaded!");
  const a = document.createElement("a");
  a.href = URL.createObjectURL(currentFile);
  a.download = currentFile.name;
  a.click();
});

// Load YouTube URL
loadURL.addEventListener("click", () => {
  const url = urlInput.value;
  if (!url) return alert("Enter a YouTube URL!");
  
  // Extract video ID
  const match = url.match(/(?:v=|\/)([a-zA-Z0-9_-]{11})/);
  if (!match) return alert("Invalid YouTube URL!");
  
  const videoID = match[1];
  youtubeFrame.src = `https://www.youtube.com/embed/${videoID}`;
  youtubeContainer.style.display = "block";
  player.style.display = "none";
});
</script>
